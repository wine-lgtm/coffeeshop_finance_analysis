<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Company Overall Budget - Coffee Cashflow</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">

    <style>
        /* Page-specific override: hide the global sidebar when this page is opened directly */
        .sidebar { display: none !important; }
        /* Reset dashboard margin so content uses full width */
        #dashboard-section { margin-left: 0 !important; padding: 40px; }

    </style>
    <style>
        /* Faded / disabled look when month is outside allowed range (like category budget: not-allowed months appear greyed) */
        input[id="overall_budget_month"].month-out-of-range,
        input[id="overall_month_filter"].month-out-of-range {
            background-color: #e9ecef;
            border-color: #adb5bd;
            color: #6c757d;
            opacity: 0.8;
        }
        #overall_budget_month{

            background-color: #d4edda;
    border: 1px solid #28a745;
    color: #155724;
        }
        #overall_month_filter{
            background-color: #d4edda;
    border: 1px solid #28a745;
    color: #155724; 
        }/* ===== Page Aesthetic Theme ===== */

#dashboard-section {
    background: linear-gradient(135deg, #f5f7fa, #fcede1);
    min-height: 100vh;
    font-family: 'Segoe UI', sans-serif;
}

/* ===== Header ===== */
.dash-header {
    background: white;
    padding: 25px 30px;
    border-radius: 16px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.06);
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 25px;
}

.dash-header h1 {
    font-size: 22px;
    color: #2c3e50;
    flex-grow: 1;
}

/* ===== Buttons ===== */
.dash-header button,
.add-expense-btn,
#btn-cancel-edit-overall {
    transition: all 0.25s ease;
    font-weight: 500;
    letter-spacing: 0.3px;
}

/* Hover lift effect */
button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 14px rgba(0,0,0,0.12);
}

/* Specific button colors */
.dash-header button {
    border-radius: 10px;
}

/* Save button glow */
.add-expense-btn:hover {
    background: #218838;
}

/* Cancel button hover */
#btn-cancel-edit-overall:hover {
    background: #777;
}

/* ===== Card Section ===== */
.manage-expense-card {
    background: white;
    padding: 25px;
    border-radius: 18px;
    box-shadow: 0 8px 22px rgba(0,0,0,0.05);
    transition: all 0.3s ease;
}

.manage-expense-card:hover {
    box-shadow: 0 12px 28px rgba(0,0,0,0.08);
}

/* ===== Inputs ===== */
input[type="month"],
input[type="number"],
input[type="text"] {
    width: 100%;
    padding: 10px 12px;
    border-radius: 10px;
    border: 1px solid #dcdfe3;
    transition: all 0.2s ease;
    font-size: 14px;
}

/* Focus highlight */
input:focus {
    outline: none;
    border-color: #3498db;
    box-shadow: 0 0 0 3px rgba(52,152,219,0.15);
    background-color: #fafdff;
}

/* Green allowed months (keep your theme but soften) */
#overall_budget_month,
#overall_month_filter {
    background-color: #f0fff4;
    border: 1px solid #28a745;
    color: #155724;
}

/* ===== Labels ===== */
label {
    letter-spacing: 0.5px;
}

/* ===== Table ===== */
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
    background: white;
    border-radius: 14px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0,0,0,0.04);
}

/* Numeric amount cells: align right and fix column width for consistency */
.amount-cell {
    text-align: right;
    font-weight: 600;
    padding-right: 12px;
    width: 220px; /* reserve space so header aligns with values */
    white-space: nowrap;
}

thead {
    background: linear-gradient(100deg, #802E22, #883e32);
    color: white;
}

th {
    padding: 14px;
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 0.6px;
}

td {
    padding: 12px 14px;
    border-bottom: 1px solid #f1f3f5;
    font-size: 15px;
}

/* Row hover highlight */
tbody tr {
    transition: all 0.2s ease;
}

tbody tr:hover {
    background-color: #f8fbff;
    transform: scale(1.01);
}

/* ===== Action Buttons in Table ===== */
td button {
    padding: 6px 10px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    font-size: 12px;
}
tfoot {
    display: none;
}

/* ===== Titles ===== */
h3 {
    color: #2c3e50;
    margin-bottom: 10px;
}
.add-expense-btn {
    background: linear-gradient(135deg, #28a745, #34d058);
}

.add-expense-btn:hover {
    background: linear-gradient(135deg, #218838, #2ecc71);
}


  
    </style>
</head>

<body>
    
    <div id="dashboard-section">
        
        <div id="budget-page" class="page-section active-section">
            <header class="dash-header">
                <h1>Company Overall Budget Management (Monthly)</h1>
                <button onclick="window.location.href='category_budget.html'; event.stopPropagation();" 
                style="background: #93BD57; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; align-self: center;">
            Manage Category Budget
        </button>

        <button onclick="window.location.href='payroll_budget.html'; event.stopPropagation();" 
                style="background: #577cbd; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; align-self: center;">
            Manage Payroll Budget
        </button>

                 <button onclick="window.location.href='budget_section.html'" style="background: #802E22; color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer;"><i class="fas fa-arrow-left"></i> Back to Budget Dashboard</button>
            </header>
            
            <div id="category-budget-section" class="manage-expense-card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3 id="form-title">Add New Monthly Overall Budget</h3>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <input type="month" id="overall_month_filter" onchange="loadOverallBudgets()" style="padding: 10px; border: 1px solid #ddd; border-radius: 8px;" title="Only current month through next 3 months" min="" max="">
                        <button onclick="loadOverallBudgets()" style="background: #2ea44f; color: white; border: none; padding: 10px 15px; border-radius: 8px; cursor: pointer;">Filter</button>
                    </div>
                </div>
                <!-- KPIs -->
                <div id="overall-kpis" style="display:flex; gap:12px; margin-bottom:16px;">
                    <div class="kpi" style="flex:1; background:#fdf8f0; padding:10px; border-radius:10px; box-shadow:0 4px 8px rgba(0,0,0,0.03);">
                        <div style="font-size:12px; color:#666;">Overall Budget</div>
                        <div id="kpi-overall" style="font-size:18px; font-weight:700;">-</div>
                    </div>
                    <div class="kpi" style="flex:1; background:#fdf8f0; padding:10px; border-radius:10px; box-shadow:0 4px 8px rgba(0,0,0,0.03);">
                        <div style="font-size:12px; color:#666;">COGS</div>
                        <div id="kpi-cogs" style="font-size:18px; font-weight:700;">-</div>
                    </div>
                    <div class="kpi" style="flex:1; background:#fdf8f0; padding:10px; border-radius:10px; box-shadow:0 4px 8px rgba(0,0,0,0.03);">
                        <div style="font-size:12px; color:#666;">Operating</div>
                        <div id="kpi-operating" style="font-size:18px; font-weight:700;">-</div>
                    </div>
                    <div class="kpi" style="flex:1; background:#fdf8f0; padding:10px; border-radius:10px; box-shadow:0 4px 8px rgba(0,0,0,0.03);">
                        <div style="font-size:12px; color:#666;">Payroll</div>
                        <div id="kpi-payroll" style="font-size:18px; font-weight:700;">-</div>
                    </div>
                </div>
                

                <div class="expense-table-input">
                    <input type="hidden" id="overall_budget_id">
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1.5fr auto; gap: 15px; align-items: end;">
                        <div>
                            <label style="font-size: 11px; font-weight: bold; color: #666; display: block; margin-bottom: 5px;">MONTH</label>
                            <input type="month" id="overall_budget_month" title="Only current month through next 3 months can be selected" min="" max="">
                            
                        </div>
                        <div>
                            <label style="font-size: 11px; font-weight: bold; color: #666; display: block; margin-bottom: 5px;">AMOUNT</label>
                            <input type="number" id="overall_budget_amount" placeholder="0.00">
                            
                        </div>
                        <div>
                            <label style="font-size: 11px; font-weight: bold; color: #666; display: block; margin-bottom: 5px;">DESCRIPTION</label>
                            <input type="text" id="overall_budget_description" placeholder="e.g. Company total budget">
                        </div>
                        <div style="display: flex; gap: 5px;">
                            <button onclick="saveOverallBudget()" class="add-expense-btn" style="height: 42px;">Save Budget</button>
                            <button id="btn-cancel-edit-overall" onclick="clearOverallForm()" style="display: none; background: #999; color: white; border: none; padding: 0 15px; border-radius: 14px; cursor: pointer; height: 42px;">Cancel</button>
                        </div>
                    </div>
                </div>
                </div>

                <!--    3 Months -->

                        
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <h3 style="margin:6px 0 10px 0; color:#1f4e79;">Last 3 Months: Budget vs Expense</h3>
                        <button id="toggle-overall-three-month" style="background:#eee; border:none; padding:6px 8px; border-radius:6px;">Hide</button>
                    </div>
                    <div id="overall-three-month-block">
                        <div style="overflow:auto">
                            <table style="width:100%; border-collapse:collapse; min-width:480px;">
                            <thead>
                                <tr style="background:#f1f5f9; color:#0b2b4a;">
                                    <th style="padding:10px; text-align:left;">Month</th>
                                    <th class="amount-cell" style="padding:10px; text-align:right;">Total Expense</th>
                                </tr>
                            </thead>
                            <tbody id="overall-three-month-table-body"></tbody>
                            <tfoot>
                                <tr>
                                    <td style="padding:10px; font-weight:700;"></td>
                                    <td id="overall-three-month-average" style="padding:10px; text-align:right; font-weight:700;"></td>
                                    <td id="overall-three-month-recommendation" style="padding:10px; text-align:right; font-weight:700;"></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                    <div id="overall-three-month-note" style="margin-top:8px; color:#334155; font-size:0.95rem;"></div>
                    <div id="overall-three-month-actions" style="margin-top:12px; display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
                     <div style="margin-bottom:8px;">
    <strong>Avg Expense:</strong> 
    <span id="overall-three-month-avg-value" style="margin-left:6px;">-</span>
</div>

<div style="margin-bottom:8px;">
    <strong>Most Expensive Month:</strong> 
    <span id="overall-three-month-highest" style="margin-left:6px;">-</span>
</div>

<div style="margin-bottom:8px;">
    <strong>Starting Balance:</strong> 
    <span id="overall_starting_balance_form" style="margin-left:6px;">-</span>
</div>
                        <div style="margin-left:auto; display:flex; gap:8px;">
                            <button id="use-average-btn" style="background:#3b82f6;color:white;border:none;padding:8px 10px;border-radius:8px;cursor:pointer;">Use Average</button>
                            <button id="use-highest-btn" style="background:#f97316;color:white;border:none;padding:8px 10px;border-radius:8px;cursor:pointer;">Use Highest</button>
                            <button id="use-avg-buffer-btn" style="background:#10b981;color:white;border:none;padding:8px 10px;border-radius:8px;cursor:pointer;">Use +10% Buffer</button>
                        </div>
                    </div>
                </div>
            </div>
        



                <h3 style="margin-top: 30px;">Monthly Overall Budget List</h3>
                
                <table>
                    <thead>
                        <tr>
                            <th>Month</th>
                            <th>Amount</th>
                            <th>Description</th>
                            <th>Actions</th>
                        </tr>
                            <div id="overall-three-month-actions" style="margin-top:12px; display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
                    <tbody id="overall-budget-table-body">
                        <!-- Budget rows will be populated here -->
                    </tbody>
                </table>
            
                <!-- LAST 3 MONTHS INSIGHTS (added) -->
                        </div>
                        </div>
                    </div>
                        <script>
                            document.addEventListener('DOMContentLoaded', function(){
                                const toggleBtn = document.getElementById('toggle-overall-three-month');
                                const block = document.getElementById('overall-three-month-block');
                                if (!toggleBtn || !block) return;
                                toggleBtn.addEventListener('click', function(){
                                    if (block.style.display === 'none') { block.style.display = ''; toggleBtn.innerText = 'Hide'; }
                                    else { block.style.display = 'none'; toggleBtn.innerText = 'Show'; }
                                });
                            });
                        </script>
                   
            </div>
        </div>

        <div id="report-page" class="page-section">
            <div class="report-container" id="report-content-area">
                </div>
        </div>
        
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="newscript.js?v=4"></script>
    <script>
        // Inline: set month limits so they work even when page is served by backend (no dependency on overall_budget.js load)
        (function() {
            function getRange() {
                var now = new Date();
                var current = new Date(now.getFullYear(), now.getMonth(), 1);
                var max = new Date(now.getFullYear(), now.getMonth() + 3, 1);
                var toStr = function(d) {
                    var y = d.getFullYear(), m = d.getMonth() + 1;
                    return y + '-' + (m < 10 ? '0' : '') + m;
                };
                return { currentMonth: toStr(current), maxMonth: toStr(max) };
            }
            function applyLimits() {
                var r = getRange();
                var formMonth = document.getElementById('overall_budget_month');
                var filterMonth = document.getElementById('overall_month_filter');
                if (formMonth) { formMonth.min = r.currentMonth; formMonth.max = r.maxMonth; if (!formMonth.value) formMonth.value = r.currentMonth; }
                if (filterMonth) { filterMonth.min = r.currentMonth; filterMonth.max = r.maxMonth; if (!filterMonth.value) filterMonth.value = r.currentMonth; }
                var hint = document.getElementById('overall_month_hint');

            }
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', applyLimits);
            } else {
                applyLimits();
            }
        })();
    </script>

            <script src="overall_budget.js?v=4"></script>
        <script>
            // API base used by budget pages
            const API_BASE = 'http://127.0.0.1:8000';

            // small helper to convert YYYY-MM to start/end
            function _monthStartEndLocal(monthStr) {
                const [y, m] = monthStr.split('-').map(v => parseInt(v, 10));
                const month = `${String(y)}-${String(m).padStart(2, '0')}`;
                const start = `${month}-01`;
                const lastDay = new Date(y, m, 0).getDate();
                const end = `${month}-${String(lastDay).padStart(2, '0')}`;
                return { month, start, end };
            }

            async function updateKPIsForOverall() {
                const filter = document.getElementById('overall_month_filter');
                if (!filter || !filter.value) return;
                const month = filter.value;
                try {
                    const res = await fetch(`${API_BASE}/api/kpis?month=${month}`);
                    if (!res.ok) return;
                    const data = await res.json();
                    document.getElementById('kpi-overall').innerText = data.overall && data.overall.budgeted ? `$ ${Number(data.overall.budgeted).toLocaleString()}` : '-';
                    document.getElementById('kpi-cogs').innerText = data.cogs && data.cogs.budgeted ? `$ ${Number(data.cogs.budgeted).toLocaleString()} (${data.cogs.percent_of_overall ?? '-' }%)` : '-';
                    document.getElementById('kpi-operating').innerText = data.operating && data.operating.budgeted ? `$ ${Number(data.operating.budgeted).toLocaleString()} (${data.operating.percent_of_overall ?? '-' }%)` : '-';
                    document.getElementById('kpi-payroll').innerText = data.payroll && data.payroll.budgeted ? `$ ${Number(data.payroll.budgeted).toLocaleString()} (${data.payroll.percent_of_overall ?? '-' }%)` : '-';
                } catch (err) { console.error('Error fetching KPIs', err); }
            }

            async function updateOverallThreeMonthInsights() {
                const tbody = document.getElementById('overall-three-month-table-body');
                const avgEl = document.getElementById('overall-three-month-average');
                const recEl = document.getElementById('overall-three-month-recommendation');
                const noteEl = document.getElementById('overall-three-month-note');
                if (!tbody || !avgEl || !recEl) return;

                try {
                    const filterInput = document.getElementById('overall_month_filter');
                    const base = (filterInput && filterInput.value) ? new Date(filterInput.value + '-01') : new Date();

                    const months = [];
                    // produce the 3 months immediately BEFORE the base month
                    for (let i = 3; i >= 1; i--) {
                        const d = new Date(base.getFullYear(), base.getMonth() - i, 1);
                        const ms = `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}`;
                        months.push(ms);
                    }

                    tbody.innerHTML = '';
                    const results = [];

                    for (const m of months) {
                        let budgeted = 0;
                        try {
                            const bRes = await fetch(`${API_BASE}/api/overall_budgets?month=${m}`);
                            if (bRes.ok) {
                                const bs = await bRes.json();
                                budgeted = (bs || []).reduce((s, b) => s + Number(b.amount || 0), 0);
                            }
                        } catch (e) { console.error('budget fetch failed for', m, e); }

                        let totalExpense = 0;
                        try {
                            const { start, end } = _monthStartEndLocal(m);
                            const fRes = await fetch(`${API_BASE}/api/financial-summary?start_date=${start}&end_date=${end}`);
                            if (fRes.ok) {
                                const data = await fRes.json();
                                const breakdown = data.breakdown || {};
                                const cogs = Number(breakdown.cogs || 0);
                                const operating = Number(breakdown.operating || 0);
                                const payroll = Number(breakdown.payroll || 0);
                                totalExpense = Math.round((cogs + operating + payroll) * 100) / 100;
                            }
                        } catch (e) { console.error('financial-summary fetch failed for', m, e); }

                        results.push({ month: m, budgeted: Math.round(budgeted * 100) / 100, expense: totalExpense });
                    }

                    results.forEach(r => {
                        const tr = document.createElement('tr');
                        tr.innerHTML = `
                            <td style="padding:10px">${r.month}</td>
                            <td class="amount-cell"><span class="currency">$</span><span class="value">${r.expense.toLocaleString()}</span></td>
                        `;
                        tbody.appendChild(tr);
                    });

                    const avgActual = results.reduce((s, x) => s + x.expense, 0) / results.length;
                    const recommended = Math.round(avgActual * 1.05);

                    avgEl.innerText = `$ ${Math.round(avgActual).toLocaleString()}`;
                    recEl.innerText = `$ ${recommended.toLocaleString()}`;
                    if (noteEl) noteEl.innerText = ``;

                    // additional outputs: avg numeric, highest month, starting balance and button wiring
                    const avgValueEl = document.getElementById('overall-three-month-avg-value');
                    const highestEl = document.getElementById('overall-three-month-highest');
                    const startingBalEl = document.getElementById('overall-starting-balance');

                    const mostExp = results.reduce((best, cur) => (cur.expense > (best.expense || 0) ? cur : best), {});
                    if (avgValueEl) avgValueEl.innerText = `$ ${Number((Math.round(avgActual*100)/100)).toFixed(2)}`;
                    if (highestEl) highestEl.innerText = `${mostExp.month || '-'} ($ ${Number((mostExp.expense||0)).toLocaleString()})`;

                    // fetch starting balance for the oldest month in the 3-month window
                    if (results.length > 0) {
                        const oldest = results[0];
                        try {
                            const { start, end } = _monthStartEndLocal(oldest.month);
                            const sbRes = await fetch(`${API_BASE}/api/financial-summary?start_date=${start}&end_date=${end}`);
                            if (sbRes.ok) {
                                const sbData = await sbRes.json();
                                const sb = (sbData.summary && sbData.summary.starting_balance) ? Number(sbData.summary.starting_balance) : null;
                                if (startingBalEl) startingBalEl.innerText = sb !== null ? `$ ${sb.toLocaleString()}` : '-';
                            } else {
                                if (startingBalEl) startingBalEl.innerText = '-';
                            }
                        } catch (e) {
                            if (startingBalEl) startingBalEl.innerText = '-';
                        }
                    }

                    // wire buttons to populate the amount input
                    const useAvgBtn = document.getElementById('use-average-btn');
                    const useHighBtn = document.getElementById('use-highest-btn');
                    const useAvgBufBtn = document.getElementById('use-avg-buffer-btn');
                    const amountInput = document.getElementById('overall_budget_amount');
                    if (useAvgBtn) useAvgBtn.onclick = () => { if (amountInput) amountInput.value = (Math.round(avgActual*100)/100).toFixed(2); };
                    if (useHighBtn) useHighBtn.onclick = () => { if (amountInput) amountInput.value = (Math.round((mostExp.expense||0)*100)/100).toFixed(2); };
                    // Buffer: add 10% to whatever numeric value is currently shown in the amount input.
                    if (useAvgBufBtn) useAvgBufBtn.onclick = () => {
                        if (!amountInput) return;
                        let cur = parseFloat(amountInput.value);
                        if (isNaN(cur)) cur = (Math.round(avgActual*100)/100) || 0;
                        const v = Math.round((cur * 1.10) * 100) / 100;
                        amountInput.value = v.toFixed(2);
                    };

                } catch (err) {
                    console.error('Failed to compute overall 3-month insights:', err);
                    tbody.innerHTML = `<tr><td colspan="3" style="padding:12px; color:#c6302c;">Failed to load 3-month insights</td></tr>`;
                    if (avgEl) avgEl.innerText = '-';
                    if (recEl) recEl.innerText = '-';
                    if (noteEl) noteEl.innerText = '';
                }
            }

            document.addEventListener('DOMContentLoaded', function() {
                // run once and when filter changes
                updateOverallThreeMonthInsights();
                updateKPIsForOverall();
                const filter = document.getElementById('overall_month_filter');
                if (filter) filter.addEventListener('change', updateOverallThreeMonthInsights);
                if (filter) filter.addEventListener('change', updateKPIsForOverall);
                setInterval(updateOverallThreeMonthInsights, 60000);
                setInterval(updateKPIsForOverall, 30000);
            });
        </script>
    <script>
        // Inline: sync filter and table when form month changes (works even if overall_budget.js is cached on localhost)
        document.addEventListener('DOMContentLoaded', function() {
            var formMonth = document.getElementById('overall_budget_month');
            var filterInput = document.getElementById('overall_month_filter');
            if (!formMonth || !filterInput) return;
            formMonth.addEventListener('change', function() {
                var month = formMonth.value;
                if (!month) return;
                filterInput.value = month;
                if (typeof loadOverallBudgets === 'function') loadOverallBudgets();
                if (typeof updateOverallThreeMonthInsights === 'function') updateOverallThreeMonthInsights();
                if (typeof updateKPIsForOverall === 'function') updateKPIsForOverall();
            });
        });
    </script>
    <script>
        // If this page is opened inside another same-origin page, hide the parent's sidebar
        // while this page is active, and restore it when this page unloads.
        (function(){
            try {
                if (window.top && window.top !== window) {
                    const parentDoc = window.top.document;
                    const sidebar = parentDoc.querySelector('.sidebar');
                    const dashboard = parentDoc.querySelector('#dashboard-section');
                    if (sidebar) {
                        sidebar.dataset._prevDisplay = sidebar.style.display || '';
                        sidebar.style.display = 'none';
                    }
                    if (dashboard) {
                        dashboard.dataset._prevMargin = dashboard.style.marginLeft || '';
                        dashboard.style.marginLeft = '0';
                    }

                    window.addEventListener('beforeunload', function() {
                        try {
                            if (sidebar) {
                                sidebar.style.display = sidebar.dataset._prevDisplay || '';
                                delete sidebar.dataset._prevDisplay;
                            }
                            if (dashboard) {
                                dashboard.style.marginLeft = dashboard.dataset._prevMargin || '';
                                delete dashboard.dataset._prevMargin;
                            }
                        } catch (e) {
                            // ignore
                        }
                    });
                }
            } catch (e) {
                // cross-origin or other access error; nothing to do
            }
        })();
    </script>
    </script>
</body>
</html>